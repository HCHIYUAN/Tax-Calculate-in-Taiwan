<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 台灣所得稅試算</title>
    
    <!-- 引入 Tailwind CSS (樣式) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 引入 React 和 ReactDOM (核心) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 引入 Babel (讓瀏覽器看懂 JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* 簡單的淡入動畫 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- 圖標組件 (Inline SVGs to replace Lucide-React imports) ---
        const IconCalculator = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
        );
        const IconInfo = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
        );
        const IconDollarSign = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
        );
        const IconUser = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
        );
        const IconUsers = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        );
        const IconBaby = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9 12h.01"/><path d="M15 12h.01"/><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"/><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"/></svg>
        );
        const IconFileText = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg>
        );
        const IconCheckCircle = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="M22 4 12 14.01l-3-3"/></svg>
        );
        const IconChevronDown = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m6 9 6 6 6-6"/></svg>
        );
        const IconChevronUp = ({className}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m18 15-6-6-6 6"/></svg>
        );

        // --- 主程式邏輯 ---
        const TaxCalculator = () => {
          const CONSTANTS = {
            EXEMPTION_NORMAL: 97000,
            EXEMPTION_ELDER: 145500,
            STD_DEDUCTION_SINGLE: 131000,
            STD_DEDUCTION_MARRIED: 262000,
            SALARY_DEDUCTION_CAP: 218000,
            PRESCHOOL_DEDUCTION: 120000,
          };

          const [inputs, setInputs] = useState({
            salary: 1000000,
            otherIncome: 0,
            isMarried: false,
            spouseIncome: 0,
            dependentsUnder70: 0,
            dependentsOver70: 0,
            childrenUnder6: 0,
            deductionMode: 'auto',
            itemizedAmount: 0,
          });

          const [results, setResults] = useState({
            totalIncome: 0,
            totalExemption: 0,
            salaryDeduction: 0,
            stdDeductionValue: 0,
            finalDeduction: 0,
            preschoolDeduction: 0,
            netIncome: 0,
            taxRate: 0,
            progressiveDifference: 0,
            taxPayable: 0,
            effectiveRate: 0,
            deductionTypeUsed: '標準扣除額'
          });

          const [showDetails, setShowDetails] = useState(false);

          const handleInputChange = (field, value) => {
            let parsedValue = value === '' ? 0 : parseInt(value, 10);
            if (isNaN(parsedValue)) parsedValue = 0;
            if (field !== 'isMarried' && field !== 'deductionMode' && parsedValue < 0) parsedValue = 0;

            setInputs(prev => ({
              ...prev,
              [field]: field === 'isMarried' || field === 'deductionMode' ? value : parsedValue
            }));
          };

          useEffect(() => {
            const {
              salary, otherIncome, isMarried, spouseIncome,
              dependentsUnder70, dependentsOver70, childrenUnder6,
              deductionMode, itemizedAmount
            } = inputs;

            const totalIncome = salary + otherIncome + (isMarried ? spouseIncome : 0);

            const selfExemption = CONSTANTS.EXEMPTION_NORMAL;
            const spouseExemption = isMarried ? CONSTANTS.EXEMPTION_NORMAL : 0;
            const depUnder70Exemption = dependentsUnder70 * CONSTANTS.EXEMPTION_NORMAL;
            const depOver70Exemption = dependentsOver70 * CONSTANTS.EXEMPTION_ELDER;
            const totalExemption = selfExemption + spouseExemption + depUnder70Exemption + depOver70Exemption;

            const selfSalaryDed = Math.min(salary, CONSTANTS.SALARY_DEDUCTION_CAP);
            const spouseSalaryDed = isMarried ? Math.min(spouseIncome, CONSTANTS.SALARY_DEDUCTION_CAP) : 0;
            const totalSalaryDeduction = selfSalaryDed + spouseSalaryDed;

            const totalPreschoolDeduction = childrenUnder6 * CONSTANTS.PRESCHOOL_DEDUCTION;

            const standardDeductionValue = isMarried ? CONSTANTS.STD_DEDUCTION_MARRIED : CONSTANTS.STD_DEDUCTION_SINGLE;
            
            let finalGeneralDeduction = 0;
            let deductionTypeUsed = '標準扣除額';

            if (deductionMode === 'itemized') {
              finalGeneralDeduction = itemizedAmount;
              deductionTypeUsed = '列舉扣除額';
            } else if (deductionMode === 'standard') {
              finalGeneralDeduction = standardDeductionValue;
            } else {
              if (itemizedAmount > standardDeductionValue) {
                finalGeneralDeduction = itemizedAmount;
                deductionTypeUsed = '列舉扣除額 (系統自動優化)';
              } else {
                finalGeneralDeduction = standardDeductionValue;
                deductionTypeUsed = '標準扣除額 (系統自動優化)';
              }
            }

            let net = totalIncome - totalExemption - finalGeneralDeduction - totalSalaryDeduction - totalPreschoolDeduction;
            if (net < 0) net = 0;

            let tax = 0;
            let rate = 5;
            let diff = 0;

            if (net <= 590000) {
              rate = 5;
              diff = 0;
              tax = net * 0.05;
            } else if (net <= 1330000) {
              rate = 12;
              diff = 41300;
              tax = net * 0.12 - 41300;
            } else if (net <= 2660000) {
              rate = 20;
              diff = 147700;
              tax = net * 0.20 - 147700;
            } else if (net <= 4980000) {
              rate = 30;
              diff = 413700;
              tax = net * 0.30 - 413700;
            } else {
              rate = 40;
              diff = 911700;
              tax = net * 0.40 - 911700;
            }

            if (tax < 0) tax = 0;

            setResults({
              totalIncome,
              totalExemption,
              salaryDeduction: totalSalaryDeduction,
              stdDeductionValue: standardDeductionValue,
              finalDeduction: finalGeneralDeduction,
              preschoolDeduction: totalPreschoolDeduction,
              netIncome: net,
              taxRate: rate,
              progressiveDifference: diff,
              taxPayable: Math.round(tax),
              effectiveRate: totalIncome > 0 ? (tax / totalIncome * 100).toFixed(2) : 0,
              deductionTypeUsed
            });

          }, [inputs]);

          const formatCurrency = (num) => {
            return new Intl.NumberFormat('zh-TW', { style: 'currency', currency: 'TWD', maximumFractionDigits: 0 }).format(num);
          };

          return (
            <div className="min-h-screen bg-slate-50 p-4 md:p-8 font-sans text-slate-800">
              <div className="max-w-5xl mx-auto space-y-6">
                
                {/* Header */}
                <header className="text-center space-y-2 mb-8">
                  <div className="inline-flex items-center justify-center p-3 bg-blue-600 rounded-full shadow-lg mb-2">
                    <IconCalculator className="w-8 h-8 text-white" />
                  </div>
                  <h1 className="text-3xl font-bold text-slate-900">2025 所得稅試算</h1>
                  <p className="text-slate-500">依據 2024 年度所得稅制（2025年5月申報適用）</p>
                </header>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  
                  {/* 左側：輸入區 */}
                  <div className="lg:col-span-2 space-y-6">
                    
                    {/* 1. 收入資料 */}
                    <section className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                      <div className="bg-slate-100 px-6 py-4 border-b border-slate-200 flex items-center gap-2">
                        <IconDollarSign className="w-5 h-5 text-blue-600" />
                        <h2 className="font-semibold text-lg">年度收入資料</h2>
                      </div>
                      <div className="p-6 grid gap-6 sm:grid-cols-2">
                        <div>
                          <label className="block text-sm font-medium text-slate-700 mb-1">本人薪資所得</label>
                          <div className="relative">
                            <input
                              type="number"
                              value={inputs.salary}
                              onChange={(e) => handleInputChange('salary', e.target.value)}
                              className="w-full p-3 pl-8 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                            />
                            <span className="absolute left-3 top-3 text-slate-400">$</span>
                          </div>
                        </div>
                        
                        {inputs.isMarried && (
                          <div>
                            <label className="block text-sm font-medium text-slate-700 mb-1">配偶薪資所得</label>
                            <div className="relative">
                              <input
                                type="number"
                                value={inputs.spouseIncome}
                                onChange={(e) => handleInputChange('spouseIncome', e.target.value)}
                                className="w-full p-3 pl-8 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                              />
                              <span className="absolute left-3 top-3 text-slate-400">$</span>
                            </div>
                          </div>
                        )}

                        <div className="sm:col-span-2">
                          <label className="block text-sm font-medium text-slate-700 mb-1">其他所得 (利息、租金、股利等)</label>
                          <div className="relative">
                            <input
                              type="number"
                              value={inputs.otherIncome}
                              onChange={(e) => handleInputChange('otherIncome', e.target.value)}
                              className="w-full p-3 pl-8 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                            />
                            <span className="absolute left-3 top-3 text-slate-400">$</span>
                          </div>
                          <p className="text-xs text-slate-500 mt-1">*本試算假設股利採合併計稅 (8.5%抵減稅額暫不計入此簡易模型)</p>
                        </div>
                      </div>
                    </section>

                    {/* 2. 家庭與扶養 */}
                    <section className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                      <div className="bg-slate-100 px-6 py-4 border-b border-slate-200 flex items-center gap-2">
                        <IconUsers className="w-5 h-5 text-blue-600" />
                        <h2 className="font-semibold text-lg">家庭狀況與扶養親屬</h2>
                      </div>
                      <div className="p-6 space-y-6">
                        <div className="flex items-center gap-4">
                          <span className="text-sm font-medium text-slate-700">婚姻狀態：</span>
                          <div className="flex bg-slate-100 p-1 rounded-lg">
                            <button
                              onClick={() => handleInputChange('isMarried', false)}
                              className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${!inputs.isMarried ? 'bg-white shadow text-blue-600' : 'text-slate-500 hover:text-slate-700'}`}
                            >
                              單身
                            </button>
                            <button
                              onClick={() => handleInputChange('isMarried', true)}
                              className={`px-4 py-2 rounded-md text-sm font-medium transition-all ${inputs.isMarried ? 'bg-white shadow text-blue-600' : 'text-slate-500 hover:text-slate-700'}`}
                            >
                              已婚
                            </button>
                          </div>
                        </div>

                        <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
                          <div>
                            <label className="block text-sm font-medium text-slate-700 mb-1">扶養親屬 (70歲以下)</label>
                            <div className="flex items-center">
                              <IconUser className="w-4 h-4 text-slate-400 mr-2" />
                              <input
                                type="number"
                                min="0"
                                value={inputs.dependentsUnder70}
                                onChange={(e) => handleInputChange('dependentsUnder70', e.target.value)}
                                className="w-full p-2 border border-slate-300 rounded-lg focus:ring-blue-500"
                              />
                            </div>
                            <p className="text-xs text-slate-500 mt-1">每人 9.7 萬免稅額</p>
                          </div>
                          <div>
                            <label className="block text-sm font-medium text-slate-700 mb-1">扶養親屬 (70歲以上)</label>
                            <div className="flex items-center">
                              <IconUser className="w-4 h-4 text-slate-400 mr-2" />
                              <input
                                type="number"
                                min="0"
                                value={inputs.dependentsOver70}
                                onChange={(e) => handleInputChange('dependentsOver70', e.target.value)}
                                className="w-full p-2 border border-slate-300 rounded-lg focus:ring-blue-500"
                              />
                            </div>
                            <p className="text-xs text-slate-500 mt-1">每人 14.55 萬免稅額</p>
                          </div>
                          <div>
                            <label className="block text-sm font-medium text-slate-700 mb-1">6歲以下子女</label>
                            <div className="flex items-center">
                              <IconBaby className="w-4 h-4 text-slate-400 mr-2" />
                              <input
                                type="number"
                                min="0"
                                value={inputs.childrenUnder6}
                                onChange={(e) => handleInputChange('childrenUnder6', e.target.value)}
                                className="w-full p-2 border border-slate-300 rounded-lg focus:ring-blue-500"
                              />
                            </div>
                            <p className="text-xs text-slate-500 mt-1">每人 12 萬扣除額</p>
                          </div>
                        </div>
                      </div>
                    </section>

                    {/* 3. 扣除額選擇 */}
                    <section className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                      <div className="bg-slate-100 px-6 py-4 border-b border-slate-200 flex items-center gap-2">
                        <IconFileText className="w-5 h-5 text-blue-600" />
                        <h2 className="font-semibold text-lg">一般扣除額設定</h2>
                      </div>
                      <div className="p-6">
                        <div className="flex flex-wrap gap-4 mb-4">
                          <label className="flex items-center space-x-2 cursor-pointer">
                            <input
                              type="radio"
                              name="deductionMode"
                              checked={inputs.deductionMode === 'auto'}
                              onChange={() => handleInputChange('deductionMode', 'auto')}
                              className="text-blue-600 focus:ring-blue-500"
                            />
                            <span>自動選擇最優惠</span>
                          </label>
                          <label className="flex items-center space-x-2 cursor-pointer">
                            <input
                              type="radio"
                              name="deductionMode"
                              checked={inputs.deductionMode === 'standard'}
                              onChange={() => handleInputChange('deductionMode', 'standard')}
                              className="text-blue-600 focus:ring-blue-500"
                            />
                            <span>標準扣除額</span>
                          </label>
                          <label className="flex items-center space-x-2 cursor-pointer">
                            <input
                              type="radio"
                              name="deductionMode"
                              checked={inputs.deductionMode === 'itemized'}
                              onChange={() => handleInputChange('deductionMode', 'itemized')}
                              className="text-blue-600 focus:ring-blue-500"
                            />
                            <span>列舉扣除額</span>
                          </label>
                        </div>

                        <div className={`transition-all duration-300 ${inputs.deductionMode === 'standard' ? 'opacity-50 pointer-events-none' : 'opacity-100'}`}>
                           <label className="block text-sm font-medium text-slate-700 mb-1">
                             列舉扣除額總計 (房貸利息、保險、捐贈、醫藥費等)
                           </label>
                           <div className="relative">
                            <input
                              type="number"
                              value={inputs.itemizedAmount}
                              onChange={(e) => handleInputChange('itemizedAmount', e.target.value)}
                              disabled={inputs.deductionMode === 'standard'}
                              className="w-full p-3 pl-8 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                            />
                            <span className="absolute left-3 top-3 text-slate-400">$</span>
                          </div>
                          <p className="text-sm text-blue-600 mt-2">
                            您的標準扣除額為：{formatCurrency(results.stdDeductionValue)}
                            {inputs.deductionMode === 'auto' && results.finalDeduction > results.stdDeductionValue && 
                              <span className="font-bold ml-2">(系統將自動採用列舉)</span>
                            }
                          </p>
                        </div>
                      </div>
                    </section>

                  </div>

                  {/* 右側：結果區 (Sticky) */}
                  <div className="lg:col-span-1">
                    <div className="sticky top-6 space-y-4">
                      
                      <div className="bg-gradient-to-br from-blue-900 to-blue-700 rounded-2xl shadow-lg text-white p-6 relative overflow-hidden">
                        <div className="absolute top-0 right-0 p-4 opacity-10">
                          <IconCalculator className="w-32 h-32" />
                        </div>
                        
                        <h3 className="text-blue-100 text-sm font-medium uppercase tracking-wider mb-1">預估應納稅額</h3>
                        <div className="text-4xl font-bold mb-4 tracking-tight">
                          {formatCurrency(results.taxPayable)}
                        </div>
                        
                        <div className="space-y-2 text-sm border-t border-blue-500/30 pt-4">
                          <div className="flex justify-between items-center">
                            <span className="text-blue-200">所得淨額</span>
                            <span className="font-mono font-bold">{formatCurrency(results.netIncome)}</span>
                          </div>
                          <div className="flex justify-between items-center">
                            <span className="text-blue-200">適用稅率</span>
                            <span className="bg-blue-500/40 px-2 py-0.5 rounded text-white font-bold">{results.taxRate}%</span>
                          </div>
                          <div className="flex justify-between items-center">
                             <span className="text-blue-200">有效稅率</span>
                             <span>{results.effectiveRate}%</span>
                          </div>
                        </div>
                      </div>

                      {/* 級距視覺化 */}
                      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
                        <div className="flex items-center gap-2 mb-4">
                          <IconCheckCircle className="w-5 h-5 text-green-500" />
                          <h3 className="font-bold text-slate-800">稅率級距落點</h3>
                        </div>
                        
                        <div className="relative pt-2 pb-6">
                          <div className="h-3 bg-slate-100 rounded-full overflow-hidden flex">
                            <div className={`h-full bg-green-400 transition-all duration-500`} style={{ width: results.taxRate >= 5 ? '20%' : '0%' }}></div>
                            <div className={`h-full bg-blue-400 transition-all duration-500`} style={{ width: results.taxRate >= 12 ? '20%' : '0%' }}></div>
                            <div className={`h-full bg-indigo-400 transition-all duration-500`} style={{ width: results.taxRate >= 20 ? '20%' : '0%' }}></div>
                            <div className={`h-full bg-purple-400 transition-all duration-500`} style={{ width: results.taxRate >= 30 ? '20%' : '0%' }}></div>
                            <div className={`h-full bg-pink-400 transition-all duration-500`} style={{ width: results.taxRate >= 40 ? '20%' : '0%' }}></div>
                          </div>
                          <div className="flex justify-between text-[10px] text-slate-400 mt-2 font-mono">
                            <span>5%</span>
                            <span>12%</span>
                            <span>20%</span>
                            <span>30%</span>
                            <span>40%</span>
                          </div>
                          
                          <div className="mt-4 text-center">
                            <span className="text-sm text-slate-600">您的淨額落於 </span>
                            <span className="font-bold text-blue-600 text-lg">{results.taxRate}%</span>
                            <span className="text-sm text-slate-600"> 級距</span>
                          </div>
                        </div>
                      </div>

                      {/* 詳細算式按鈕 */}
                      <button
                        onClick={() => setShowDetails(!showDetails)}
                        className="w-full bg-white border border-slate-300 hover:bg-slate-50 text-slate-700 py-3 rounded-xl flex items-center justify-center gap-2 transition-all"
                      >
                        {showDetails ? <IconChevronUp className="w-4 h-4" /> : <IconChevronDown className="w-4 h-4" />}
                        {showDetails ? "隱藏計算明細" : "查看計算明細"}
                      </button>

                      {/* 詳細算式內容 */}
                      {showDetails && (
                        <div className="bg-slate-50 rounded-2xl p-4 text-sm space-y-3 border border-slate-200 animate-fadeIn">
                          <div className="flex justify-between">
                            <span>(+) 所得總額</span>
                            <span>{formatCurrency(results.totalIncome)}</span>
                          </div>
                          <div className="flex justify-between text-red-500">
                            <span>(-) 全部免稅額</span>
                            <span>-{formatCurrency(results.totalExemption)}</span>
                          </div>
                          <div className="flex justify-between text-red-500">
                            <span>(-) {results.deductionTypeUsed}</span>
                            <span>-{formatCurrency(results.finalDeduction)}</span>
                          </div>
                          <div className="flex justify-between text-red-500">
                            <span>(-) 薪資特別扣除額</span>
                            <span>-{formatCurrency(results.salaryDeduction)}</span>
                          </div>
                          {results.preschoolDeduction > 0 && (
                            <div className="flex justify-between text-red-500">
                              <span>(-) 幼兒學前扣除額</span>
                              <span>-{formatCurrency(results.preschoolDeduction)}</span>
                            </div>
                          )}
                          <div className="border-t border-slate-300 my-2 pt-2 flex justify-between font-bold">
                            <span>(=) 所得淨額</span>
                            <span>{formatCurrency(results.netIncome)}</span>
                          </div>
                          <div className="flex justify-between text-slate-500 text-xs">
                            <span>× 稅率 {results.taxRate}%</span>
                            <span>{formatCurrency(results.netIncome * (results.taxRate / 100))}</span>
                          </div>
                          <div className="flex justify-between text-slate-500 text-xs">
                            <span>- 累進差額</span>
                            <span>-{formatCurrency(results.progressiveDifference)}</span>
                          </div>
                          <div className="border-t border-slate-300 my-2 pt-2 flex justify-between font-bold text-blue-700">
                            <span>(=) 應納稅額</span>
                            <span>{formatCurrency(results.taxPayable)}</span>
                          </div>
                        </div>
                      )}

                      <div className="flex gap-2 items-start p-3 bg-yellow-50 text-yellow-800 rounded-lg text-xs">
                        <IconInfo className="w-4 h-4 mt-0.5 flex-shrink-0" />
                        <p>此為簡易試算，未包含「基本生活費差額」、「投資抵減」及「股利分開計稅」等複雜情況。實際稅額請以國稅局申報系統為準。</p>
                      </div>

                    </div>
                  </div>
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TaxCalculator />);
    </script>
</body>
</html>
